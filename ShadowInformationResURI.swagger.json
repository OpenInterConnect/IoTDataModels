{
  "swagger":"2.0",
  "info":{
    "title":"ShadowInformation",
    "version":"20190402",
    "license":{
      "name":"OCF Data Model License",
      "url":"https://github.com/openconnectivityfoundation/core/blob/e28a9e0a92e17042ba3e83661e4c0fbce8bdc4ba/LICENSE.md",
      "x-copyright":"copyright 2016-2017, 2019 Open Connectivity Foundation, Inc. All rights reserved."
    },
    "termsOfService":"https://openconnectivityfoundation.github.io/core/DISCLAIMER.md"
  },
  "schemes":[
    "http"
  ],
  "consumes":[
    "application/json"
  ],
  "produces":[
    "application/json"
  ],
  "paths":{
    "/ShadowInformationResURI":{
      "get":{
        "description":"The Shadow information Resource is exposed by a Shadow Device and maintains references to its Original Device.\nThe property \"odi\" stores the identity (UUID) of the Original Device.\nThe property \"ode\" is array in which each item takes the form of an \"ep\" value as extracted from the \"eps\" list of the Original Device's /oic/res Link.\nThe property \"issynched\" represents synchronization status indicating whether the Shadow Device is allowed to synchronize its Resources with its Original Device to handle actuation requests.\nThe optional property \"ssr\" is an array in which each item is a URI of the Original Device's \"oic.wk.shadow.sync\" Resource.",
        "parameters":[
          {
            "$ref":"#/parameters/interface"
          }
        ],
        "responses":{
          "200":{
            "description":"Retrieves the current state of the Shadow Information Resource.",
            "x-example":{
              "rt":[
                "oic.wk.shadow.info"
              ],
              "if":[
                "oic.if.rw",
                "oic.if.baseline"
              ],
              "odi":"40590fd0-a11b-4b95-af91-27c69f4a5824",
              "ssr":[
                "coaps://[fe80::b1e6]:55555/oic/shadow/sync"
              ],
              "ode":[
                "coaps://[fe80::b1e6]:55555"
              ],
              "issynched":true
            },
            "schema":{
              "$ref":"#/definitions/ShadowInformation"
            }
          }
        }
      },
      "post":{
        "description":"A Mediator sets the properties of the Shadow Information Resource on the Shadow Device providing it sufficient context around its Original Device. This enables the Shadow Device to relay actuation requests from its Clients to the Original Device via a request to the Original Device's \"oic.wk.shadow.sync\" Resource.\nThis request may fail if the mandatory properties are not configured by the time \"issynched\" is set to \"true\".",
        "parameters":[
          {
            "$ref":"#/parameters/interface"
          },
          {
            "name":"body",
            "in":"body",
            "required":true,
            "schema":{
              "$ref":"#/definitions/ShadowInformation"
            },
            "x-example":{
              "odi":"40590fd0-a11b-4b95-af91-27c69f4a5824",
              "ssr":[
                "coaps://[fe80::b1e6]:55555/oic/shadow/sync"
              ],
              "ode":[
                "coaps://[fe80::b1e6]:55555"
              ],
              "issynched":true
            }
          }
        ],
        "responses":{
          "200":{
            "description":"",
            "x-example":{
              "rt":[
                "oic.wk.shadow.info"
              ],
              "if":[
                "oic.if.rw",
                "oic.if.baseline"
              ],
              "odi":"20590fd0-a11b-4b95-af91-27c69f4a5824",
              "ssr":[
                "coaps://[fe80::b1e6]:55555/oic/shadow/sync"
              ],
              "ode":[
                "coaps://[fe80::b1e6]:55555"
              ],
              "issynched":true
            },
            "schema":{
              "$ref":"#/definitions/ShadowInformation"
            }
          },
          "403":{
            "description":"This response is generated by the Shadow Device when the Mediator sends:\n  An UPDATE with a read-only property or improperly formatted property.\n  An UPDATE that attempts to set \"issynched\" to \"true\" when the values of \"odi\" and \"ode\" are not yet configured.\nThe OCF Server responds with the current Resource representation for \"oic.wk.shadow.info\".",
            "x-example":{
              "rt":[
                "oic.wk.shadow.info"
              ],
              "if":[
                "oic.if.rw",
                "oic.if.baseline"
              ],
              "odi":"40590fd0-a11b-4b95-af91-27c69f4a5824",
              "ssr":[
                "coaps://[fe80::b1e6]:55555/oic/shadow/sync"
              ],
              "ode":[

              ],
              "issynched":false
            },
            "schema":{
              "$ref":"#/definitions/ShadowInformation"
            }
          }
        }
      }
    }
  },
  "parameters":{
    "interface":{
      "in":"query",
      "name":"if",
      "type":"string",
      "enum":[
        "oic.if.rw",
        "oic.if.baseline"
      ]
    }
  },
  "definitions":{
    "ShadowInformation":{
      "properties":{
        "rt":{
          "description":"The Resource Type.",
          "items":{
            "maxLength":64,
            "type":"string",
            "enum":[
              "oic.wk.shadow.info"
            ]
          },
          "minItems":1,
          "uniqueItems":true,
          "readOnly":true,
          "type":"array"
        },
        "odi":{
          "description":"The identity (UUID) of the Original Device.",
          "$ref":"#/definitions/uuid"
        },
        "ode":{
          "description":"Array of \"ep\" values  extracted from the \"eps\" list of the Original Device's /oic/res Link.",
          "items":{
            "format":"uri",
            "type":"string"
          },
          "minItems":1,
          "uniqueItems":true,
          "type":"array"
        },
        "issynched":{
          "description":"An indication of whether the Shadow Device is allowed to synchronize its Resources with its Original Device to handle actuation requests.",
          "type":"boolean",
          "default":false
        },
        "ssr":{
          "description":"Array of URIs of the Original Device's \"oic.wk.shadow.sync\" Resource.",
          "items":{
            "format":"uri",
            "type":"string"
          },
          "minItems":1,
          "uniqueItems":true,
          "type":"array"
        },
        "n":{
          "$ref":"https://openconnectivityfoundation.github.io/core/schemas/oic.common.properties.core-schema.json#/definitions/n"
        },
        "id":{
          "$ref":"https://openconnectivityfoundation.github.io/core/schemas/oic.common.properties.core-schema.json#/definitions/id"
        },
        "if":{
          "description":"The OCF Interface set supported by this Resource.",
          "items":{
            "enum":[
              "oic.if.baseline",
              "oic.if.rw"
            ],
            "maxLength":64,
            "type":"string"
          },
          "minItems":2,
          "uniqueItems":true,
          "readOnly":true,
          "type":"array"
        },
        "isasleep":{
          "description":"An indication whether the Original Device is currently in a sleep mode.",
          "type":"boolean",
          "default":false
        },
        "wakeuptime":{
          "description":"An RFC 3339 formatted absolute timestamp when the Original Device will wake up.",
          "format":"date-time",
          "type":"string"
        },
        "wakeonscheme":{
          "description":"A string that signifies a supported wake up mechanism that utilizes a specific Link-layer technology.",
          "maxLength":64,
          "type":"string"
        },
        "wakeoncontext":{
          "description":"An array of strings where each item signifies a deployment defined parameter that is supplied by the Original Device and utilized by the Shadow Device to wake up the Original Device from a sleep mode.",
          "items":{
            "maxLength":64,
            "type":"string"
          },
          "minItems":1,
          "type":"array"
        }
      },
      "type":"object",
      "required":[
        "odi",
        "ode",
        "issynched"
      ]
    },
    "uuid":{
      "description":"Format pattern according to IETF RFC 4122.",
      "pattern":"^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$",
      "type":"string"
    }
  }
}
