{
  "swagger": "2.0",
  "info": {
    "title": "Temperature",
    "version": "2019-02-15",
    "license": {
      "name": "OCF Data Model License",
      "url": "https://github.com/openconnectivityfoundation/core/blob/e28a9e0a92e17042ba3e83661e4c0fbce8bdc4ba/LICENSE.md",
      "x-copyright": "copyright 2016-2017, 2019 Open Connectivity Foundation, Inc. All rights reserved."
    },
    "termsOfService": "https://openconnectivityfoundation.github.io/core/DISCLAIMER.md"
  },
  "schemes": ["http"],
  "consumes": ["application/json"],
  "produces": ["application/json"],
  "paths": {
    "/TemperatureResURI" : {
      "get": {
        "description": "This Resource describes a sensed or actuated Temperature value.\nThe Property \"temperature\" describes the current value measured.\nThe Property \"units\" is a single value that is one of \"C\", \"F\" or \"K\".\nIt provides the unit of measurement for the \"temperature\" value.\nIt is a read-only value that is provided by the server.\nIf the \"units\" Property is missing the default is Celsius [C].\nWhen the Property \"range\" is omitted the default is +/- MAXINT.\nA client can specify the units for the requested temperature by use of a query parameter.\nIf no query parameter is provided the server provides its default measure or set value.\nIt is recommended to return always the units Property in the result.",
        "parameters": [
          {"$ref": "#/parameters/interface"},
          {"$ref": "#/parameters/unit"}
        ],
        "responses": {
            "200": {
              "description" : "Retrieves the current temperature value.",
              "x-example":
                {
                  "rt": ["oic.r.temperature"],
                  "if": [ "oic.if.a", "oic.if.baseline"],
                  "temperature": 20.0,
                  "units": "C"
                }
                ,
              "schema": { "$ref": "#/definitions/Temperature" }
            },
            "403": {
              "description" : "This response is generated by the OCF Server when the client sends:\n  A RETRIEVE with queryParameter indicating a unit that the server does not support.\nThe server responds with the current resource representation including the\n\"units\" property illustrating the supported units and the error.",
              "x-example":
                {
                  "temperature": 20.0,
                  "units": "C"
                },
              "schema": { "$ref": "#/definitions/Temperature" }
            }
        }
      },
      "post": {
        "description": "Sets the desired temperature value.\nIf a \"unit\" is included and the server may not support the unit indicated the request will fail.\nIf the units are omitted value is taken to be in C.",
        "parameters": [
          {"$ref": "#/parameters/interface"},
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": { "$ref": "#/definitions/Temperature" },
            "x-example":
              {
                "temperature": 18.0,
                "units": "F"
              }
          }
        ],
        "responses": {
            "200": {
              "description" : "",
              "x-example":
                {
                  "temperature": 18.0,
                  "units": "F"
                }
                ,
              "schema": { "$ref": "#/definitions/Temperature" }
            },
            "403": {
              "description" : "This response is generated by the OCF Server when the client sends:\n  An UPDATE with an out of range property value for temperature.\n  An UPDATE with an unsupported unit for this server.\nThe OCF Server responds with the current resource representation including\nthe \"range\" property illustrating the supported range and the error.",
              "x-example":
                {
                  "temperature": 20.0,
                  "units": "C"
                }
                ,
              "schema": { "$ref": "#/definitions/Temperature" }
            }
        }
      }
    }
  },
  "parameters": {
        "interface" : {
            "in" : "query",
            "name" : "if",
            "type" : "string",
            "enum" : ["oic.if.a", "oic.if.s", "oic.if.baseline"]
        },
        "unit" :  {
            "in": "query",
            "description": "Units",
            "type": "string",
            "enum": ["C", "F", "K"],
            "name": "units",
            "x-queryexample" : "/TemperatureResURI?units=C"
      }
  },
  "definitions": {
    "Temperature" : {
        "properties": {
            "rt" : {
              "description": "The Resource Type.",
              "items": {
                "maxLength": 64,
                "type": "string",
                "enum": ["oic.r.temperature"]
              },
              "minItems": 1,
              "uniqueItems": true,
              "readOnly": true,
              "type": "array"
            },
            "temperature" : {
              "description": "The current temperature setting or measurement.",
              "type": "number"
            },
            "units" :  {
              "description": "The unit for the conveyed temperature value, Note that when doing an UPDATE, the unit on the device does NOT change, it only indicates the unit of the conveyed value during the UPDATE operation.",
              "enum": [
                "C",
                "F",
                "K"
              ],
              "type": "string"
            },
            "n": {
              "$ref": "https://openconnectivityfoundation.github.io/core/schemas/oic.common.properties.core-schema.json#/definitions/n"
            },
            "id": {
              "$ref": "https://openconnectivityfoundation.github.io/core/schemas/oic.common.properties.core-schema.json#/definitions/id"
            },
            "range" :  {
              "$ref": "https://openconnectivityfoundation.github.io/IoTDataModels/schemas/oic.baseresource.properties-schema.json#/definitions/range_number"
            },
            "step" : {
              "$ref": "https://openconnectivityfoundation.github.io/IoTDataModels/schemas/oic.baseresource.properties-schema.json#/definitions/step_number"
            },
            "precision" : {
              "$ref": "https://openconnectivityfoundation.github.io/IoTDataModels/schemas/oic.baseresource.properties-schema.json#/definitions/precision"
            },
            "if" : {
              "description": "The OCF Interface set supported by this Resource.",
              "items": {
                "enum": [
                  "oic.if.baseline",
                  "oic.if.s",
                  "oic.if.a"
                ],
                "maxLength": 64,
                "type": "string"
              },
              "minItems": 2,
              "uniqueItems": true,
              "readOnly": true,
              "type": "array"
           }
       },
       "type" : "object",
       "required": ["temperature"]
    }
  }
}